<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>变量提升 | JavaScript Full Stack</title>
    <meta name="description" content="Hello Brolly">
    <link rel="icon" href="/Brolly/favicon.ico">
  <link rel="manifest" href="/Brolly/manifest.json">
    
    <link rel="preload" href="/Brolly/assets/css/0.styles.a67c2e88.css" as="style"><link rel="preload" href="/Brolly/assets/js/app.7b9e173e.js" as="script"><link rel="preload" href="/Brolly/assets/js/12.c9c16877.js" as="script"><link rel="prefetch" href="/Brolly/assets/js/10.b36ca8fb.js"><link rel="prefetch" href="/Brolly/assets/js/11.d3a09525.js"><link rel="prefetch" href="/Brolly/assets/js/13.034cce5e.js"><link rel="prefetch" href="/Brolly/assets/js/14.eff92717.js"><link rel="prefetch" href="/Brolly/assets/js/15.a834fbe1.js"><link rel="prefetch" href="/Brolly/assets/js/16.c4711e3a.js"><link rel="prefetch" href="/Brolly/assets/js/17.ff2229f4.js"><link rel="prefetch" href="/Brolly/assets/js/18.5630e698.js"><link rel="prefetch" href="/Brolly/assets/js/19.2d1eb67d.js"><link rel="prefetch" href="/Brolly/assets/js/2.447e5283.js"><link rel="prefetch" href="/Brolly/assets/js/20.1d1a8fdc.js"><link rel="prefetch" href="/Brolly/assets/js/3.e674d770.js"><link rel="prefetch" href="/Brolly/assets/js/4.913a3201.js"><link rel="prefetch" href="/Brolly/assets/js/5.bdf7b1ac.js"><link rel="prefetch" href="/Brolly/assets/js/6.ab10abf4.js"><link rel="prefetch" href="/Brolly/assets/js/7.3fe457c8.js"><link rel="prefetch" href="/Brolly/assets/js/8.39454e26.js"><link rel="prefetch" href="/Brolly/assets/js/9.0951f248.js">
    <link rel="stylesheet" href="/Brolly/assets/css/0.styles.a67c2e88.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Brolly/" class="home-link router-link-active"><!----> <span class="site-name">JavaScript Full Stack</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Brolly/" class="nav-link">首页</a></div><div class="nav-item"><a href="https://juejin.im/user/59aaafd9518825242238fbd6/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.yuque.com/dengnixiake/zk0n0i" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaScript基础教程
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Brolly/" class="nav-link">首页</a></div><div class="nav-item"><a href="https://juejin.im/user/59aaafd9518825242238fbd6/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.yuque.com/dengnixiake/zk0n0i" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaScript基础教程
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>JavaScript起步</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/Brolly/JavaScript/Git.html" class="sidebar-link">Git入门</a></li><li><a href="/Brolly/JavaScript/Linux常用命令.html" class="sidebar-link">Linux常用命令</a></li><li><a href="/Brolly/JavaScript/Web前端介绍.html" class="sidebar-link">web前端介绍</a></li><li><a href="/Brolly/JavaScript/变量提升.html" class="active sidebar-link">变量提升</a></li><li><a href="/Brolly/JavaScript/正则.html" class="sidebar-link">正则</a></li><li><a href="/Brolly/JavaScript/JS中盒模型.html" class="sidebar-link">JS中盒模型</a></li><li><a href="/Brolly/JavaScript/获取css样式.html" class="sidebar-link">JS中获取css样式</a></li><li><a href="/Brolly/JavaScript/类名操作.html" class="sidebar-link">类名操作</a></li><li><a href="/Brolly/JavaScript/JS动画.html" class="sidebar-link">JS动画</a></li><li><a href="/Brolly/JavaScript/轮播图.html" class="sidebar-link">轮播图</a></li><li><a href="/Brolly/JavaScript/DOM事件.html" class="sidebar-link">DOM事件</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Nodejs</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>HTTP</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="变量提升（预解析）"><a href="#变量提升（预解析）" aria-hidden="true" class="header-anchor">#</a> 变量提升（预解析）</h1> <h2 id="一、javascript引擎"><a href="#一、javascript引擎" aria-hidden="true" class="header-anchor">#</a> 一、JavaScript引擎</h2> <blockquote><p>JavaScript引擎的主要作用是，读取JavaScript代码进行处理和运行。</p></blockquote> <p>JavaScript引擎（JavaScript解释器），在执行JS代码之前 会先在当前作用域中进行<strong>预解析阶段</strong>，然后再从上到下开始<strong>逐行执行JS代码</strong>。</p> <h3 id="js中代码执行分为两个步骤："><a href="#js中代码执行分为两个步骤：" aria-hidden="true" class="header-anchor">#</a> JS中代码执行分为两个步骤：</h3> <ul><li><p>1.预解析 先全盘扫描当前作用域中的所有声明的变量，进行预先的分析和处理</p></li> <li><p>2.执行 从上到下开始 逐行解释并运行JS代码</p></li></ul> <blockquote><p>JS代码在运行之前，先解析当前作用域中的所有代码，获取所有被声明的变量进行预处理。</p></blockquote> <h2 id="二、变量提升（预解析）"><a href="#二、变量提升（预解析）" aria-hidden="true" class="header-anchor">#</a> 二、变量提升（预解析）</h2> <blockquote><p>在JS代码执行之前，会把当前作用域中所有带var和带function关键字的变量 进行提前的声明和定义（赋值）。</p></blockquote> <h3 id="变量提升中普通变量和函数变量"><a href="#变量提升中普通变量和函数变量" aria-hidden="true" class="header-anchor">#</a> 变量提升中普通变量和函数变量</h3> <p>在变量提升阶段：</p> <ul><li><p>对于带var的普通变量 会被提前声明并被赋值为默认值undefined</p></li> <li><p>对于带function的函数变量 会被提前声明并被赋值为当前函数本身</p></li></ul> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
  <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">100</span> <span class="token comment">// 代码执行的时候 才会进行赋值操作</span>
</code></pre></div><p>用var定义的变量，在定义变量之前使用变量 输出得是变量的默认值undefined</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fe<span class="token punctuation">)</span> <span class="token comment">// function fe() { console.log('fe') }</span>
  <span class="token function">fe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'fe'</span>
  <span class="token keyword">function</span> <span class="token function">fe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fe'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>用function定义的函数变量，在定义之前使用，输出的函数是被提前定义好的函数本身，所以我们可以在函数定义之前就来使用函数。</p> <blockquote><p>按照正常的思维逻辑，我们本应该是在定义了变量之后才可以使用变量。但在JS中由于存在变量提升的原因 导致出现了上面👆的现象。</p></blockquote> <p>变量提升结束之后，代码开始从上到下逐行解释并运行</p> <h2 id="三、作用域（栈内存）"><a href="#三、作用域（栈内存）" aria-hidden="true" class="header-anchor">#</a> 三、作用域（栈内存）</h2> <blockquote><p>作用域（栈内存），供JS代码执行的环境，也是用来保存基本数据类型的值。</p></blockquote> <h3 id="js中的作用域"><a href="#js中的作用域" aria-hidden="true" class="header-anchor">#</a> JS中的作用域</h3> <ul><li><p>全局作用域（window） 当打开页面时，浏览器为了执行全局中的所有代码 而提供的JS执行的环境</p></li> <li><p>函数作用域（私有作用域） 当函数执行的时候，为了执行函数体里的代码，而提供的JS执行的环境</p></li> <li><p>块级作用域（私有作用域） 在代码块中{}，使用ES6提供的let const 形成的作用域</p></li></ul> <blockquote><p>只要是想执行JS代码 就需要提供一个作用域（栈内存）让代码在里面执行，比如 你想要踢足球 你就需要有一个能踢足球的活动场地（所谓足球场）。</p></blockquote> <p>全局指的是 页面中的整个script</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token comment">// 全局中的代码</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h3 id="全局变量和私有变量"><a href="#全局变量和私有变量" aria-hidden="true" class="header-anchor">#</a> 全局变量和私有变量</h3> <ul><li><p>全局变量 在全局作用域中声明的变量（全局变量参加的是全局中的变量提升）</p></li> <li><p>私有变量 在私有作用域中声明的变量（私有变量参加的是私有作用域中的变量提升）</p></li></ul> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">var</span> boy <span class="token operator">=</span> <span class="token string">'boy'</span> <span class="token comment">// 全局变量</span>

  <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// num 形参变量也属于函数中的私有变量</span>
    <span class="token keyword">var</span> girl <span class="token operator">=</span> <span class="token string">'girl'</span> <span class="token comment">// girl 函数中的私有变量</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="变量提升只发生在当前作用域中"><a href="#变量提升只发生在当前作用域中" aria-hidden="true" class="header-anchor">#</a> 变量提升只发生在当前作用域中</h2> <p>当打开页面的时候，最先进行的是全局作用域中的变量提升。
当函数执行的时候，进行的是函数作用域中的变量提升。</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">'java'</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
  <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">'script'</span>
<span class="token punctuation">}</span>

</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/Brolly/assets/js/app.7b9e173e.js" defer></script><script src="/Brolly/assets/js/12.c9c16877.js" defer></script>
  </body>
</html>
